<ui:composition
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:mm="http://minutenwerk.org/mimic4j"
  xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
  xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
  <ui:remove>corresponding bridge is MmJsfBridgeLink</ui:remove>
  <ui:remove>link has evalId and iterating f:params</ui:remove>
  <c:set var="mimic"           value="${mm.toJsf}" />
  <c:set var="targetReference" value="${mimic.targetReference}" />
  <c:choose>
    <ui:remove>enabled link has outcome, params and title</ui:remove>
    <c:when test="${not mimic.disabled}">
      <h:link
        id         = "${mimic.evalId(id)}"
        outcome    = "${targetReference.mmOutcome}"
        rendered   = "${mimic.rendered}"
        styleClass = "${styleClass} ${mimic.styleClass}"
        title      = "${mimic.title}">
          <c:forEach var="param" items="${targetReference.mmParams}">
            <f:param name="${param.mmName}" value="${param.mmValue}" />
          </c:forEach>
          <ui:insert name="overrideValue">${mimic.value}</ui:insert>
      </h:link>
    </c:when>
    <ui:remove>disabled link is displayed as span and has no title</ui:remove>
    <c:otherwise>
      <h:panelGroup
        id         = "${mimic.evalId(id)}"
        rendered   = "${mimic.rendered}"
        styleClass = "${styleClass} ${mimic.styleClass} disabled">
          <ui:remove>override is necessary for icons</ui:remove>
          <ui:insert name="overrideValue">${mimic.value}</ui:insert>
      </h:panelGroup>
    </c:otherwise>
  </c:choose>
</ui:composition>
